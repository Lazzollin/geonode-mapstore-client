(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[25473],{31935:(e,r,n)=>{"use strict";n.d(r,{YL:()=>l,B0:()=>c,Mz:()=>a,TC:()=>s,qS:()=>f,Pe:()=>d,TP:()=>v});var t=n(22222),o=n(206273),i=n(93152),u=n(624262),l=function(e){return e.backgroundSelector&&e.backgroundSelector.source},c=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},a=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},s=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},f=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},d=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},v=(0,t.P1)(o.l2,i.$v,i.lh,(function(e,r,n){var t=e.filter((function(e){return e&&"background"===e.group}));return n&&n[r]?t.map((function(e){return(0,u.kf)(e,r)}))||[]:t}))},788113:(e,r,n)=>{"use strict";n.d(r,{b6:()=>d,PG:()=>v,_x:()=>p,Mm:()=>b,dP:()=>y,SX:()=>m,ZL:()=>g,_S:()=>O,iH:()=>S,R7:()=>j,Q7:()=>h,n7:()=>P,bA:()=>w,hm:()=>k,E2:()=>E,Cb:()=>D,eK:()=>x,Im:()=>B,e8:()=>T,JF:()=>A,kS:()=>L,y:()=>R,l2:()=>_,HN:()=>C,BM:()=>I,am:()=>z,LV:()=>F,CK:()=>M,jU:()=>U});var t=n(22222),o=n(227361),i=n.n(o),u=n(800827),l=n(577215);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){f(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var d=function(e){return i()(e,"catalog.services")},v=(0,t.P1)((function(e){return i()(e,"catalog.default.staticServices")}),d,(function(e,r){var n=null==e?void 0:e.default_map_backgrounds;return n?(n.readOnly=!0,s(s({},r),{},{default_map_backgrounds:n})):r})),p=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},b=function(e){return i()(e,"controls.metadataexplorer.group")},y=function(e){return i()(e,"catalog.saving")},m=function(e){return i()(e,"catalog.result")},g=function(e){return i()(e,"catalog.openCatalogServiceList")},O=function(e){return i()(e,"catalog.newService")},S=function(e){return i()(e,"catalog.newService.type","csw")},j=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},h=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},P=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},w=function(e){return i()(e,"catalog.searchOptions")},k=function(e){return i()(e,"catalog.loadingError")},E=function(e){return i()(e,"catalog.loading",!1)},D=function(e){return i()(e,"catalog.selectedService")},x=function(e){return i()(e,"catalog.mode","view")},B=function(e){return i()(e,"catalog.layerError")},T=function(e){return i()(e,"catalog.searchOptions.text","")},A=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},L=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},R=function(e){return i()(e,"catalog.pageSize",4)},_=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},C=(0,t.zB)({projection:u.uy}),I=function(e){return i()(e,"catalog.formatsLoading",!1)},z=function(e){var r,n;return"edit"===x(e)?i()(e,"catalog.newService.supportedFormats.imageFormats",[]):(null===(r=j(e))||void 0===r||null===(n=r.supportedFormats)||void 0===n?void 0:n.imageFormats)||[]},F=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,l.oL)())},M=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},U=function(e){return i()(e,"catalog.isNewServiceAdded",!1)}},577215:(e,r,n)=>{"use strict";n.d(r,{oL:()=>b,F0:()=>y,cP:()=>m,Br:()=>g});var t=n(944908),o=n.n(t),i=n(513218),u=n.n(i),l=n(984596),c=n.n(l),a=n(396606);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach((function(r){v(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function v(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var p=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],b=function(){return o()(Object.values((0,a.eq)()))},y=function(e){return p.includes(e)},m=function(e){return b().includes(e)},g=function(e){var r,n,t,o,i;return u()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.westBoundLongitude,miny:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.southBoundLatitude,maxx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&c()(e.Style).map((function(e){return d(d(d({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:c()(e.LegendURL).map((function(e){var r,n,t,o,i,u;return d({width:null!=e&&null!==(r=e.$)&&void 0!==r&&r.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(n=e.$)&&void 0!==n&&n.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(t=e.OnlineResource)||void 0===t||null===(o=t.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(u=i.$)||void 0===u?void 0:u["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}}},76907:(e,r,n)=>{"use strict";n.d(r,{ez:()=>te,gH:()=>ae,il:()=>ne,iV:()=>ue,Il:()=>fe,_i:()=>be,F7:()=>ye,oS:()=>le,yK:()=>ie,uu:()=>W,YR:()=>pe,fg:()=>J,Yj:()=>q,HG:()=>V,UU:()=>Z,l_:()=>se,L4:()=>re,V$:()=>oe,km:()=>ee,Bs:()=>Q});var t=n(800827),o=n(552259),i=n(22222),u=n(788113),l=n(401757),c=n(307877),a=n(285148),s=n(997291),f=n(206273),d=n(31935);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach((function(r){y(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function y(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==v(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===v(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var m={},g=(0,i.zB)({catalogServices:(0,i.zB)({services:u.b6,selectedService:u.Cb}),widgetsConfig:(0,i.zB)({widgets:l.zm,layouts:l.p,collapsed:l.lF}),mapInfoConfiguration:c.bI,dimensionData:(0,i.zB)({currentTime:a.WT,offsetTime:a.ns}),timelineData:(0,i.zB)({selectedLayer:s.Li,endValuesSupport:s.Hc,snapRadioButtonEnabled:s.ei,layers:s.Kf})});function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var S=["map"];function j(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?j(Object(n),!0).forEach((function(r){P(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function P(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==O(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===O(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var w=n(866113),k=n(367306),E=n(535721),D=n(452992),x=n(957557),B=n.n(x),T=n(701469),A=n.n(T),L=n(513218),R=n.n(L),_=n(618446),C=n.n(_),I=n(478718),z=n.n(I),F=n(441609),M=n.n(F),U=n(227361),$=n.n(U),K=["data"];function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function N(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function H(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function X(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?H(Object(n),!0).forEach((function(r){Y(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function Y(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==G(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===G(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var J=function(e){var r,n,t,o=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.id,i=null==e||null===(n=e.gnresource)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.pk;return o||i},V=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.perms)||[]},q=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.title)||!1},W=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.abstract)||!1},Z=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.thumbnail_url)||!1},Q=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.updatingThumbnail)||!1},ee=function(e){var r,n;return(null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.thumbnailChanged)||!1},re=function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type)||!1},ne=function(e){var r,n,t,o,i=null==e||null===(r=e.gnresource)||void 0===r||null===(n=r.permissions)||void 0===n?void 0:n.canEdit,u=(null==e||null===(t=e.gnresource)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.perms)||[];return i||u.includes("change_resourcebase")},te=function(e){var r,n,t;return null==e||null===(r=e.security)||void 0===r||null===(n=r.user)||void 0===n||null===(t=n.perms)||void 0===t?void 0:t.includes("add_resource")},oe=function(e){var r;return!(null==e||null===(r=e.gnresource)||void 0===r||!r.isNew)},ie=function(e){var r;return null==e||null===(r=e.gnresource)||void 0===r?void 0:r.data},ue=function(e){var r;return(null==e||null===(r=e.gnresource)||void 0===r?void 0:r.compactPermissions)||{}},le=function(e){var r,n,t,o=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.compactPermissions,i=null==e||null===(n=e.gnresource)||void 0===n?void 0:n.isCompactPermissionsChanged,u=null==e||null===(t=e.gnresource)||void 0===t?void 0:t.geoLimits;return{compactPermissions:(i||(null==u?void 0:u.length)>0)&&o?o:null,geoLimits:(null==u?void 0:u.length)>0?u:null}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some((function(r){return e.info.groups.some((function(e){return e===r.name}))&&"manage"===r.permissions}))||!1},ae=function(e){var r,n=ue(e),t=n.users||[],o=n.groups||[],i=n.organizations||[],u=null==e||null===(r=e.security)||void 0===r?void 0:r.user,l=(u&&t.find((function(e){return e.id===u.pk}))||{}).permissions;return["owner","manage"].includes(l)||ce(u,o)||ce(u,i)},se=function(e){var r;return null==e||null===(r=e.gnresource)||void 0===r?void 0:r.selectedLayerPermissions},fe=function(e,r){var n;switch(r||(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.type)){case E.P6.MAP:return(0,t.Od)(e)?function(e){var r=(0,f.l2)(e),n=function(e){var r=(0,t.Od)(e),n=(0,f.l2)(e),i=(0,f.Bt)(e),u=(0,d.Mz)(e),l=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig}(e),c=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig}(e),a=function(e){var r=Object.keys(m).reduce((function(r,n){return b(b({},r),{},y({},n,m[n](e)))}),{});return b(b({},g(e)),r)}(e);return o.default.saveMapConfiguration(r,n,i,u,l,c,a)}(e),i=n.map;return h(h({},function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,S)),{},{map:h(h({},i),{},{layers:((null==i?void 0:i.layers)||[]).map((function(e){var n=r.find((function(r){return r.id===e.id}));if(n){var t=n.availableStyles;return h(h({},e),{},{availableStyles:t})}return e}))})})}(e):null;case E.P6.GEOSTORY:return(0,w.Kg)(e);case E.P6.DASHBOARD:return(0,l.md)(e);default:return null}};function de(e,r){return A()(e)?e.map((function(e){return de(e,r)})):R()(e)?Object.keys(B()(e,r)).reduce((function(n,t){return X(X({},n),{},Y({},t,de(e[t],r)))}),{}):e}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.crs===r.crs&&Math.abs(e.x-r.x)<1e-12&&Math.abs(e.y-r.y)<1e-12}var pe=function(e){var r,n,t,i=ae(e),u=(0,D.s2)(e),l=(0,D.SJ)(e);if(!i||u||l)return null;var c=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type,a=["title","abstract","data"],s=z()((null==e||null===(n=e.gnresource)||void 0===n?void 0:n.initialResource)||{},a),f=s.data,d=void 0===f?{}:f,v=function(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(s,K),p=le(e),b=p.compactPermissions,y=p.geoLimits,m=JSON.parse(JSON.stringify(fe(e)||{})),g=B()(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data,["thumbnail_url","thumbnailChanged","updatingThumbnail"])||{},O=z()(g,a),S=!function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null==e||null===(r=e.gnresource)||void 0===r?void 0:r.type;if(M()(n)||M()(t))return!0;switch(i){case E.P6.MAP:return(0,o.compareMapChanges)(de(n,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]),de(t,["extraParams","getFeatureInfo","store","capability","extendedParams","availableStyles","center","zoom","bbox"]));case E.P6.GEOSTORY:return C()(de(n,["fontFamilies"]),de(t,["fontFamilies"]));case E.P6.DASHBOARD:var u=(null==n?void 0:n.widgets)||[],l=u.every((function(e){return"map"!==e.widgetType||!!e.maps})),c=!!((null==t?void 0:t.widgets)||[]).find((function(e){if("map"===e.widgetType){var r,n=u.find((function(r){return r.id===e.id})),t=function(e){if(Array.isArray(e))return N(e)}(i=e.maps)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,r){if(e){if("string"==typeof e)return N(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,r):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=l?t.every((function(e){var r,t=(null==n||null===(r=n.maps)||void 0===r?void 0:r.find((function(r){return r.mapId===e.mapId})))||{};return ve(null==t?void 0:t.center,null==e?void 0:e.center)})):ve(null==n||null===(r=n.map)||void 0===r?void 0:r.center,t[0].center);return!n||!o}var i;return!1})),a=l?t:X(X({},t),{},{widgets:t.widgets.map((function(e){if(e.maps){var r=e.maps;delete e.maps,e.map=r[0]}return e}))}),s=["bbox","size","center","layouts"],f=l?s:["bbox","size","center","layouts","mapId","dependenciesMap","selectedMapId"];return C()(de(n,s),de(a,f))&&!c;default:return!0}}(e,d,m),j=!(M()(O)||M()(v)||C()(O,v));return b||y||S||j?{compactPermissions:b,geoLimits:y,resource:j?g:void 0,data:S?m:void 0,resourceType:c,pk:g.pk}:null},be=function(e){return $()((0,w.Kg)(e),"resources",[]).filter((function(e){var r;return"geonode"===(null==e||null===(r=e.data)||void 0===r?void 0:r.sourceId)}))},ye=function(e){return $()((0,k.hS)(e),"widgets",[]).filter((function(e){var r;return!("map"!==e.widgetType||null===(r=e.map)||void 0===r||!r.hasOwnProperty("extraParams"))}))}},452992:(e,r,n)=>{"use strict";n.d(r,{jp:()=>d,WB:()=>v,zL:()=>p,aZ:()=>b,IX:()=>y,SJ:()=>m,s2:()=>g});var t=n(76907),o=n(12530),i=n(653488);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function a(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return f(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var d=function(e,r){var n,t;return((null==e||null===(n=e.resourceservice)||void 0===n||null===(t=n.processes)||void 0===t?void 0:t.find((function(e){var n,t;return(null==e||null===(n=e.resource)||void 0===n?void 0:n.pk)===(null==r||null===(t=r.resource)||void 0===t?void 0:t.pk)&&(null==e?void 0:e.processType)===(null==r?void 0:r.processType)})))||{}).completed},v=function(e){var r,n,o=(0,t.yK)(e);return!!(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.downloads)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.pk)===(null==o?void 0:o.pk)})))},p=function(e){var r,n=(0,i.BP)(e),t=(null==e||null===(r=e.resourceservice)||void 0===r?void 0:r.downloads)||[];return null==n?void 0:n.reduce((function(e,r){return t.find((function(e){return e.pk===r.pk}))?[].concat(s(e),[c({},r)]):s(e)}),[])},b=function(e){var r,n=(0,i.n)(e),t=(null==e||null===(r=e.resourceservice)||void 0===r?void 0:r.downloads)||[];return null==n?void 0:n.reduce((function(e,r){return t.find((function(e){return e.pk===r.pk}))?[].concat(s(e),[c({},r)]):s(e)}),[])},y=function(e){var r,n,i=(0,t.yK)(e),u=i&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==i?void 0:i.pk)&&(null==e?void 0:e.processType)===o.zj.PERMISSIONS_RESOURCE})));return!(!u||null!=u&&u.completed)},m=function(e){var r,n,i=(0,t.yK)(e),u=i&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==i?void 0:i.pk)&&(null==e?void 0:e.processType)===o.zj.COPY_RESOURCE})));return!(!u||null!=u&&u.completed)},g=function(e){var r,n,i=(0,t.yK)(e),u=i&&(null==e||null===(r=e.resourceservice)||void 0===r||null===(n=r.processes)||void 0===n?void 0:n.find((function(e){var r;return(null==e||null===(r=e.resource)||void 0===r?void 0:r.pk)===(null==i?void 0:i.pk)&&(null==e?void 0:e.processType)===o.zj.DELETE_RESOURCE})));return!(!u||null!=u&&u.completed)}},653488:(e,r,n)=>{"use strict";n.d(r,{BP:()=>c,n:()=>a,m0:()=>s});var t=n(535721);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){l(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r,n){return(r=function(e){var r=function(e,r){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!==o(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(r)?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var c=function(e){var r,n,o=(null==e||null===(r=e.gnsearch)||void 0===r?void 0:r.resources)||[],i=(null==e||null===(n=e.resourceservice)||void 0===n?void 0:n.processes)||[],l=o.map((function(e){var r=i.filter((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==e?void 0:e.pk)}));return r.length>0?u(u({},e),{},{processes:r}):e}));return(0,t.AU)(l)},a=function(e){var r,n,o,i=(null==e||null===(r=e.gnsearch)||void 0===r||null===(n=r.featuredResources)||void 0===n?void 0:n.resources)||[],l=(null==e||null===(o=e.resourceservice)||void 0===o?void 0:o.processes)||[],c=i.map((function(e){var r=l.filter((function(r){var n;return(null==r||null===(n=r.resource)||void 0===n?void 0:n.pk)===(null==e?void 0:e.pk)}));return r.length>0?u(u({},e),{},{processes:r}):e}));return(0,t.AU)(c)},s=function(e){var r,n=c(e).filter((function(e){return e["@temporary"]})).length;return((null==e||null===(r=e.gnsearch)||void 0===r?void 0:r.total)||0)+n}}}]);