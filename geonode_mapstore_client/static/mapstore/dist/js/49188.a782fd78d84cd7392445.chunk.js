(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[49188],{649188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pt});var i=r(119690),n=r(376180),o=r(45992),a=r(737275),l=r(223502);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function u(e){this.proxy=e}function c(){}u.prototype.getURL=function(e){var t=function(e){var t=e,r="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),r=e.substring(e.indexOf("?")+1)),{url:t,queryString:r}}(e),r=t.url,i=t.queryString;return 0===r.indexOf("//")&&(r=location.protocol+r),(0,l.b)()+encodeURIComponent(r+i)},c.prototype.getURL=function(e){return e},i.default.registerType("tileprovider",(function(e){var t,r,i,f=(r=o.Z.getLayerConfig(e.provider,e),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);s=!0);}catch(e){u=!0,n=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(r,i)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],y=f[1],h=a.ZP.getProxyUrl({});h&&(t=y.noCors||(0,l.$)(p));var d,m,v=y.credits,g=v?new n.Credit(v.text,v.imageUrl,v.link):y.attribution;return new n.UrlTemplateImageryProvider({url:(d=p,m=y,d.replace(/{([^{}]+)}/g,(function(e,t){if(["x","y","z","s"].includes(t))return e;var r=m[t];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(m)),r}))),enablePickFeatures:!1,subdomains:y.subdomains,maximumLevel:y.maxZoom,minimumLevel:y.minZoom,credit:g,proxy:t?new u(h):new c})}));var f=r(624262),p=["isWorkSpaceCapabilities"];function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=n.defined,w=n.defaultValue,S=n.DeveloperError,O=n.Credit,P=n.Resource,_=n.Ellipsoid,j=n.GeographicTilingScheme,x=n.WebMercatorTilingScheme,C=n.TerrainProvider,M=n.HeightmapTerrainData,T=n.Event,A=n.Request,E=n.when,D={},k={CRS:[{name:"CRS:84",ellipsoid:_.WGS84,firstAxeIsLatitude:!1,tilingScheme:j,supportedCRS:"urn:ogc:def:crs:OGC:2:84"},{name:"EPSG:4326",ellipsoid:_.WGS84,firstAxeIsLatitude:!0,tilingScheme:j,SupportedCRS:"urn:ogc:def:crs:EPSG::4326"},{name:"EPSG:3857",ellipsoid:_.WGS84,firstAxeIsLatitude:!1,tilingScheme:x,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"},{name:"OSGEO:41001",ellipsoid:_.WGS84,firstAxeIsLatitude:!1,tilingScheme:x,SupportedCRS:"urn:ogc:def:crs:EPSG::3857"}],FormatArray:[{format:"image/bil",postProcessArray:function(e,t,r,i,n,o){var a,l=new DataView(e),s=new ArrayBuffer(t.height*t.width*2),u=new DataView(s);if(s.byteLength===e.byteLength){for(var c,f=0;f<s.byteLength;f+=2)(c=l.getInt16(f,o)-n)>i&&c<r?u.setInt16(f,c,!0):u.setInt16(f,0,!0);a=new Int16Array(s)}return a}}]},I=k.CRS.map((function(e){return e.name}));function L(e){if(!b(e.layerName))throw new S("options.layerName is required.");var t=e.url,r=e.layerName,i=e.version||"1.3.0",n=e.crs,o=e.fixedHeight,a=e.fixedWidth,l=void 0,s=void 0,u=void 0,c={};c.proxy=e.proxy,c.sampleTerrainZoomLevel=w(e.sampleTerrainZoomLevel,18),c.heightMapWidth=w(e.heightMapWidth,65),c.heightMapHeight=w(e.heightMapHeight,c.heightMapWidth),c.littleEndian=e.littleEndian,c.tilingScheme=void 0,c.ready=!1,c.waterMask=w(e.waterMask,!1),c.offset=w(e.offset,0),c.highest=w(e.highest,12e3),c.lowest=w(e.lowest,-500),"boolean"!=typeof c.waterMask&&(c.waterMask=!1),null!==i&&(u=/^1\.[3-9]\./.test(i));var f=t.indexOf("?");f>-1&&(t=t.substring(0,f));var p=k.FormatArray.filter((function(e){return"image/bil"===e.format}));if(p.length>0&&(c.formatArray=p[0]),!b(c.formatArray)||"string"!=typeof c.formatArray.format||"function"!=typeof c.formatArray.postProcessArray)throw c.formatArray=void 0,new S("format not supported.");if(c.formatArray.terrainDataStructure={heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1},b(o)&&b(a)&&(o=parseFloat(o),c.heightMapHeight=o>0&&o<c.heightMapHeight?o:c.heightMapHeight,a=parseFloat(a),c.heightMapWidth=a>0&&a<c.heightMapWidth?a:c.heightMapWidth),b(n)&&b(i)){for(var y=!1,h=0;h<k.CRS.length&&!y;h++){var d=k.CRS[h],m=d.name;if(m===n){l=m,s=d.firstAxeIsLatitude;var g=d.tilingScheme;c.tilingScheme=new g({ellipsoid:d.ellipsoid}),c.getTileDataAvailable=function(){return!0},y=!0}}c.ready=y&&b(c.formatArray)&&b(i)}if(c.ready){var O=t+"?SERVICE=WMS&REQUEST=GetMap&layers="+r+"&version="+i+"&bbox=";if(O+=u&&s?"{south},{west},{north},{east}":"{west},{south},{east},{north}",O+="&crs="+l+"&srs="+l,c.formatArray){var P=O+"&format="+c.formatArray.format+"&width="+c.heightMapWidth+"&height="+c.heightMapHeight;c.getURLtemplateArray=function(){return P}}}return c.levelZeroMaximumGeometricError=C.getEstimatedLevelZeroGeometricErrorForAHeightmap(c.tilingScheme.ellipsoid,c.heightMapWidth,c.tilingScheme.getNumberOfXTilesAtLevel(0)),v(v({},e),c)}function R(e){if(function(e){return b(e.url)&&b(e.layerName)&&b(e.crs)}(e))return Promise.resolve(L(e));if(b(e.url)){var t=e.url,r=t.lastIndexOf("?");r>-1&&(t=t.substring(0,r));var i="".concat(t,"?SERVICE=WMS&REQUEST=GetCapabilities&tiled=true"),n=(0,f.Fh)({url:i,name:e.layerName}),o=n!==i;return P.fetchXML({url:n,proxy:e.proxy,queryParameters:e.params}).then((function(t){return L(function(e,t){var r=t.isWorkSpaceCapabilities,i=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(t,p);if(!(e instanceof XMLDocument))throw new S("xml must be a XMLDocument");if(!b(i.layerName))throw new S("description.layerName is required.");var n="1.3.0",o=e.querySelector("[version]");if(null!==o&&(n=o.getAttribute("version")),!h(e.querySelectorAll("Request>GetMap>Format")).map((function(e){return e.textContent})).find((function(e){return"image/bil"===e})))throw new S("image/bil format is not supported");var a=h(e.querySelectorAll("Layer[queryable='1'],Layer[queryable='true']")).find((function(e){var t=e.querySelector("Name").textContent;return r?i.layerName.split(":")[1]===t:i.layerName===t})),l=h(a.querySelectorAll("CRS")).map((function(e){return e.textContent})).find((function(e){return I.includes(e)}));if(!l)throw new S("available crs are not supported");var s=a.getAttribute("fixedHeight"),u=a.getAttribute("fixedWidth");return v(v({},i),{},{fixedHeight:s,fixedWidth:u,crs:l,version:n})}(t,v(v({},e),{},{isWorkSpaceCapabilities:o})))}))}return Promise.reject(new S("either options.url or options.layerName are required."))}function W(e){var t=this;this._errorEvent=new T;var r=e.credit;"string"==typeof r&&(r=new O(r)),this._credit=r,this._availability=void 0,this._ready=!1,this._tileCredits=void 0,this._readyPromise=Promise.resolve(!0).then((function(){return R(e).then((function(e){t._options=e,t._ready=!0}))}))}W.prototype.getHeightmapTerrainDataArray=function(e,t,r){var i,n=this;if(!isNaN(e+t+r)){var o=function(e,t,r,i,n){var o=n.tilingScheme.tileXYToNativeRectangle(t,r,i),a=(o.east-o.west)/(n.heightMapWidth-1),l=(o.north-o.south)/(n.heightMapHeight-1);o.west-=.5*a,o.east+=.5*a,o.south-=.5*l,o.north+=.5*l;var s=n.tilingScheme.getNumberOfYTilesAtLevel(i)-r-1;return e.replace("{south}",o.south).replace("{north}",o.north).replace("{west}",o.west).replace("{east}",o.east).replace("{x}",t).replace("{y}",r).replace("{tmsY}",s)}(this._options.getURLtemplateArray(e,t,r),e,t,r,this._options),a={highest:this._options.highest,lowest:this._options.lowest,offset:this._options.offset},l=function(e,t,r,i){var n=0,o=r+1;return n|=i.getTileDataAvailable(2*e,2*t,o)?1:0,n|=i.getTileDataAvailable(2*e+1,2*t,o)?2:0,(n|=i.getTileDataAvailable(2*e,2*t+1,o)?4:0)|(i.getTileDataAvailable(2*e+1,2*t+1,o)?8:0)}(e,t,r,this._options);if(D[o])return E(Promise.resolve(new M(D[o])));var s=this._options.proxy||{getURL:function(e){return e}};if(i=P.fetchArrayBuffer({url:o,proxy:s,headers:this._options.headers,queryParameters:this._options.params,request:new A({throttleByServer:this._options.sampleTerrainZoomLevel!==r})}),b(i))return i.then((function(e){return D[o]=n.arrayToHeightmapTerrainDataOptions(e,a,{width:n._options.heightMapWidth,height:n._options.heightMapHeight},n._options.formatArray,n._options.waterMask,n._options.littleEndian,l),new M(D[o])})).otherwise((function(){return new M({buffer:new Uint16Array(n._options.heightMapWidth*n._options.heightMapHeight),width:n._options.heightMapWidth,height:n._options.heightMapHeight,childTileMask:l,waterMask:new Uint8Array(n._options.heightMapWidth*n._options.heightMapHeight),structure:n._options.formatArray.terrainDataStructure})}))}return i},W.prototype.arrayToHeightmapTerrainDataOptions=function(e,t,r,i,n,o,a){var l=r;"number"==typeof l&&(l={width:l,height:l});var s=i.postProcessArray(e,l,t.highest,t.lowest,t.offset,o);if(!b(s))throw new S("no good size");var u={buffer:s,width:l.width,height:l.height,childTileMask:a,structure:i.terrainDataStructure};if(n){for(var c=new Uint8Array(s.length),f=0;f<s.length;f++)s[f]<=0&&(c[f]=255);u.waterMask=c}return u},W.prototype.requestTileGeometry=function(e,t,r){if(!this._ready)throw new S("requestTileGeometry must not be called before the terrain provider is ready.");if(!b(this._options.getURLtemplateArray))throw new S("getURLtemplateArray function is not available.");return this.getHeightmapTerrainDataArray(e,t,r)},W.prototype.getLevelMaximumGeometricError=function(e){return this._options.levelZeroMaximumGeometricError/(1<<e)},W.prototype.getTileDataAvailable=function(e,t,r){return this._options.getTileDataAvailable(e,t,r)},Object.defineProperties(W.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this._ready)throw new S("credit must not be called before the terrain provider is ready.");return this._credit}},tilingScheme:{get:function(){if(!this._ready)throw new S("tilingScheme must not be called before the terrain provider is ready.");return this._options.tilingScheme}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},hasWaterMask:{get:function(){if(!this._ready)throw new S("hasWaterMask must not be called before the terrain provider is ready.");return this._options.waterMask}},hasVertexNormals:{get:function(){return!1}},hasMetadata:{get:function(){return!1}},availability:{get:function(){return!1}},sampleTerrainZoomLevel:{get:function(){if(!this._ready)throw new S("sampleTerrainZoomLevel must not be called before the terrain provider is ready.");return this._options.sampleTerrainZoomLevel}}});const G=W;var q=r(737295),U=r.n(q),H=r(701469),N=r.n(H),V=r(618446),F=r.n(V),z=r(233044);function Z(e){var t=e,r="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),r=e.substring(e.indexOf("?")+1)),{url:t,queryString:r}}function B(e){this.proxy=e}function $(){}B.prototype.getURL=function(e){var t=Z(e),r=t.url,i=t.queryString;return(0,l.b)()+encodeURIComponent(r+i)},$.prototype.getURL=function(e){var t=Z(e);return t.url+t.queryString};var Q=function(e){var t,r=a.ZP.getProxyUrl({});return r&&(t=e.noCors||(0,l.$)(e.url)),t?new B(r):new $};const X={PARAM_OPTIONS:["layers","styles","style","format","transparent","version","tiled","opacity","zindex","srs","singletile","_v_","filterobj"],wmsToCesiumOptionsBIL:function(e){var t=e.url,r=(0,z.getAuthenticationHeaders)(t,e.securityToken),i=(0,f.QW)(e);return{url:t,headers:r,proxy:Q(e),littleEndian:e.littleEndian||e.littleendian||!1,layerName:e.name,version:e.version,crs:e.crs,sampleTerrainZoomLevel:e.sampleTerrainZoomLevel,heightMapWidth:e.heightMapWidth,heightMapHeight:e.heightMapHeight,waterMask:e.waterMask,offset:e.offset,highest:e.highest,lowest:e.lowest,params:i}},getProxy:Q};var J=r(143378),Y=r(333358);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==K(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===K(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=function e(t){var r;return t.useForElevation?new G(X.wmsToCesiumOptionsBIL(t)):(r=t.singleTile?new n.SingleTileImageryProvider(function(e){var t=void 0!==e.opacity?e.opacity:1,r=(0,J.v)(e),i=U()(te(te({styles:e.style||"",format:((0,Y.z)(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:t},(0,f._6)(e)),{},{layers:e.name,width:e.size||2e3,height:e.size||2e3,bbox:"-180.0,-90,180.0,90",srs:"EPSG:4326"}),r||{},(0,f.QW)(e)),o=(N()(e.url)?e.url[Math.round(Math.random()*(e.url.length-1))]:e.url)+"?service=WMS&version=1.1.0&request=GetMap&"+function(e){return Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}((0,z.addAuthenticationToSLD)(i,e)),a=(0,z.getAuthenticationHeaders)(o,e.securityToken);return{url:new n.Resource({url:o,headers:a,proxy:X.getProxy(e)})}}(t)):new n.WebMapServiceImageryProvider(function(e){var t,r=void 0!==e.opacity?e.opacity:1,i=(0,J.v)(e),o=e.credits,a=o?new n.Credit(o.text||o.title,o.imageUrl,o.link):e.attribution,l=(0,f.D$)(N()(e.url)?e.url:[e.url]),s=(0,z.getAuthenticationHeaders)(l[0],e.securityToken);return U()({url:new n.Resource({url:"{s}",headers:s,proxy:X.getProxy(e)}),tileDiscardPolicy:"none"===e.tileDiscardPolicy?void 0:null!==(t=e.tileDiscardPolicy)&&void 0!==t?t:new n.NeverTileDiscardPolicy,credit:a,subdomains:l,layers:e.name,enablePickFeatures:!1,parameters:U()({styles:e.style||"",format:((0,Y.z)(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,opacity:r,tiled:void 0===e.tiled||e.tiled,width:e.tileSize||256,height:e.tileSize||256},U()({},e._v_?{_v_:e._v_}:{},i||{},(0,f.QW)(e)))})}(t)),r.updateParams=function(r){var i=U()({},t,{params:U()({},t.params||{},r)});return e(i)},r)};i.default.registerType("wms",{create:ie,update:function(e,t,r){var i=t&&t.params,n=r&&r.params,o=te(te({},i),n);return Object.keys(te(te(te({},t),r),o)).filter((function(e){return X.PARAM_OPTIONS.indexOf(e.toLowerCase())>=0})).filter((function(e){var o=void 0===r[e]?n&&n[e]:r[e],a=void 0===t[e]?i&&i[e]:t[e];return!F()(o,a)})).length>0||t.securityToken!==r.securityToken||!F()(t.layerFilter,r.layerFilter)||t.tileSize!==r.tileSize?ie(t):null}});var ne=r(707294),oe=r(513218),ae=r.n(oe),le=r(512571),se=r.n(le),ue=r(227361),ce=r.n(ue),fe=r(91175),pe=r.n(fe),ye=r(472500),he=r.n(ye);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==de(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==de(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===de(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=e,r="";return-1!==e.indexOf("?")&&(t=e.substring(0,e.indexOf("?")+1),-1!==e.indexOf("%")&&(t=decodeURIComponent(t)),r=e.substring(e.indexOf("?")+1)),{url:t,queryString:r}}function we(e){this.proxy=e}function Se(){}we.prototype.getURL=function(e){var t=be(e),r=t.url,i=t.queryString;return(0,l.b)()+encodeURIComponent(r+i)},Se.prototype.getURL=function(e){var t=be(e);return t.url+t.queryString};var Oe=function(e){return e.indexOf("EPSG:4326")>=0?new n.GeographicTilingScheme:e.indexOf("EPSG:3857")>=0?new n.WebMercatorTilingScheme:null},Pe=function(e,t){var r,i,n=ne.C2(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),o=(r=e.matrixIds&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return(ae()(e)&&e[t]||N()(e)&&e||[]).map((function(e){return e.identifier}))}(e.matrixIds,n)||function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t}(e),r.length>i?se()(r,0,i):r.length<i?r.concat(new Array(i-r.length)):r);return{tileMatrixSet:n,matrixIds:o}};var _e=function e(t){var r,i=function(e){var t=ne.nJ(e),r="EPSG:4326",i=Pe(t,r),o=i.tileMatrixSet,s=i.matrixIds;if(0===s.length){var u=Pe(t,r="EPSG:3857");o=u.tileMatrixSet,s=u.matrixIds}var c,p=a.ZP.getProxyUrl({});p&&(c=(0,l.$)(t.url)&&p);var y,h=(y=t.matrixIds&&t.matrixIds[o],function(e,t,r){return y&&y[r]&&!y[r].ranges||e<=parseInt(ce()(y[r],"ranges.cols.max"),10)&&e>=parseInt(ce()(y[r],"ranges.cols.min"),10)&&t<=parseInt(ce()(y[r],"ranges.rows.max"),10)&&t>=parseInt(ce()(y[r],"ranges.rows.min"),10)}),d=he().format({query:ve({},(0,f.QW)(t))}),m=t.credits,v=m?new n.Credit(m.text||m.title,m.imageUrl,m.link):"";return U()({url:new n.Resource({url:pe()((0,f.D$)(N()(t.url)?t.url:[t.url],d)),proxy:c&&new we(c)||new Se}),format:((0,Y.z)(t.format)?"image/png":t.format)||"image/png",isValid:h,credit:v,layer:t.name,style:t.style||"",tileMatrixLabels:s,tilingScheme:Oe(r,t.matrixIds[o]),enablePickFeatures:!1,tileWidth:t.tileWidth||t.tileSize||256,tileHeight:t.tileHeight||t.tileSize||256,tileMatrixSetID:o,maximumLevel:30,parameters:ve({},(0,f.QW)(t))})}(t),o=(r=new n.WebMapTileServiceImageryProvider(i)).requestImage;return r.requestImage=function(e,t,n){return i.isValid(e,t,n)?o.bind(r)(e,t,n):new Promise((function(){}))},r.updateParams=function(r){var i=U()({},t,{params:U()({},t.params||{},r)});return e(i)},r};function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==je(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===je(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).color,t=void 0===e?"#ffffff":e;this._tilingScheme=new n.GeographicTilingScheme,this._readyPromise=n.when.resolve(!0),this._canvas=document.createElement("canvas"),this._canvas.width=1,this._canvas.height=1;var r=this._canvas.getContext("2d");r.fillStyle=t,r.fillRect(0,0,this._canvas.width,this._canvas.height)}function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function De(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==Ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ae(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default.registerType("wmts",{create:_e,update:function(e,t,r){return t.securityToken!==r.securityToken||r.format!==t.format||r.credits!==t.credits?_e(t):null}}),i.default.registerType("marker",{create:function(e,t){var r=Ce({point:{pixelSize:5,color:n.Color.RED,outlineColor:n.Color.WHITE,outlineWidth:2}},e.style),i=t.entities.add(Ce({position:n.Cartesian3.fromDegrees(e.point.lng,e.point.lat)},r));return{detached:!0,point:i,remove:function(){t.entities.remove(i)}}},update:function(e,t,r,i){return F()(t.point,r.point)&&t.visibility===r.visibility?null:(e.remove(),t.visibility?this.create(t,i):null)}}),Object.defineProperties(Te.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){}},tileHeight:{get:function(){}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),Te.prototype.getTileCredits=function(){},Te.prototype.requestImage=function(){return this._canvas},Te.prototype.pickFeatures=function(){},i.default.registerType("empty",(function(){return new Te({color:"#ffffff"})})),i.default.registerType("bing",(function(e){var t=e.apiKey;return new n.BingMapsImageryProvider({url:"//dev.virtualearth.net",key:t,mapStyle:n.BingMapsStyle[e.name.toUpperCase()]})}));var ke=function(){var e=[n.Math.toRadians(.05),n.Math.toRadians(.1),n.Math.toRadians(.2),n.Math.toRadians(.5),n.Math.toRadians(1),n.Math.toRadians(2),n.Math.toRadians(5),n.Math.toRadians(10)];function t(e,t){var r=e||{};this._tilingScheme=r.tilingScheme||new n.GeographicTilingScheme,this._color=r.color&&new n.Color(r.color[0],r.color[1],r.color[2],r.color[3])||new n.Color(1,1,1,.4),this._tileWidth=r.tileWidth||256,this._tileHeight=r.tileHeight||256,this._ready=!0,this._sexagesimal=r.sexagesimal||!1,this._numLines=r.numLines||50,this._scene=t,this._labels=new n.LabelCollection,t.primitives.add(this._labels),this._polylines=new n.PolylineCollection,t.primitives.add(this._polylines),this._ellipsoid=t.globe.ellipsoid;var i=document.createElement("canvas");i.width=256,i.height=256,this._canvas=i}var r=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),i=Object.defineProperties;function o(e){return e<.01?3:e<.1?2:e<1?1:0}return r&&i||(i=function(e){return e}),i(t.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),t.prototype.makeLabel=function(e,t,r,i){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new n.Cartographic(e,t,10)),text:r,font:"normal",fillColor:this._color,outlineColor:this._color,style:n.LabelStyle.FILL,pixelOffset:new n.Cartesian2(5,i?5:-5),eyeOffset:n.Cartesian3.ZERO,horizontalOrigin:n.HorizontalOrigin.LEFT,verticalOrigin:i?n.VerticalOrigin.BOTTOM:n.VerticalOrigin.TOP,scale:1})},t.prototype._drawGrid=function(t){if(!this._currentExtent||!this._currentExtent.equals(t)){this._currentExtent=t,this._polylines.removeAll(),this._labels.removeAll();for(var r=0,i=0,a=0;a<e.length&&r<(t.north-t.south)/10;a++)r=e[a];for(var l=0;l<e.length&&i<(t.east-t.west)/10;l++)i=e[l];var s=(t.west<0?Math.ceil(t.west/i):Math.floor(t.west/i))*i,u=(t.south<0?Math.ceil(t.south/r):Math.floor(t.south/r))*r,c=(t.east<0?Math.ceil(t.east/r):Math.floor(t.east/r))*r,f=(t.north<0?Math.ceil(t.north/i):Math.floor(t.north/i))*i;s=Math.max(s-2*i,-Math.PI),c=Math.min(c+2*i,Math.PI),u=Math.max(u-2*r,-Math.PI/2),f=Math.min(f+2*i,Math.PI/2);for(var p=this._ellipsoid,y=n.Math.toRadians(1),h=u+Math.floor((f-u)/r/2)*r,d=s;d<c;d+=i){for(var m=[],v=u;v<f;v+=y)m.push(new n.Cartographic(d,v));m.push(new n.Cartographic(d,f)),this._polylines.add({positions:p.cartographicArrayToCartesianArray(m),width:.75,material:new n.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var g=n.Math.toDegrees(d);this.makeLabel(d,h,this._sexagesimal?this._decToSex(g):g.toFixed(o(i)),!1)}for(var b=s+Math.floor((c-s)/i/2)*i,w=u;w<f;w+=r){for(var S=[],O=s;O<c;O+=y)S.push(new n.Cartographic(O,w));S.push(new n.Cartographic(c,w)),this._polylines.add({positions:p.cartographicArrayToCartesianArray(S),width:1,material:new n.Material({fabric:{type:"Color",uniforms:{color:this._color}}})});var P=n.Math.toDegrees(w);this.makeLabel(b,w,this._sexagesimal?this._decToSex(P):P.toFixed(o(r)),!0)}}},t.prototype.requestImage=function(){return this._show&&this._drawGrid(this._getExtentView()),this._canvas},t.prototype.setVisible=function(e){this._show=e,e?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},t.prototype.isVisible=function(){return this._show},t.prototype._decToSex=function(t){var r=Math.floor(t),i=(60*(Math.abs(t)-r)).toFixed(2);return"60.00"===i&&(r+=1,e="0.00"),[r,":",i].join("")},t.prototype._getExtentView=function(){for(var e=this._scene.camera,t=this._scene.canvas,r=[e.pickEllipsoid(new n.Cartesian2(0,0),this._ellipsoid),e.pickEllipsoid(new n.Cartesian2(t.width,0),this._ellipsoid),e.pickEllipsoid(new n.Cartesian2(0,t.height),this._ellipsoid),e.pickEllipsoid(new n.Cartesian2(t.width,t.height),this._ellipsoid)],i=0;i<4;i++)if(void 0===r[i])return n.Rectangle.MAX_VALUE;return n.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(r))},t.prototype.destroy=function(){this._show=!1,this._polylines&&this._scene.primitives.remove(this._polylines),this._labels&&this._scene.primitives.remove(this._labels)},t}(),Ie=function(e,t){var r=t.scene,i=new ke(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({tileWidth:512,tileHeight:512,numLines:10},e),r);return e.visibility&&i.setVisible(!0),i};i.default.registerType("graticule",{create:Ie,update:function(e,t,r,i){return t.visibility!==r.visibility&&(e.setVisible(!1),t.visibility)?Ie(t,i):null}}),i.default.registerType("osm",(function(){return new n.OpenStreetMapImageryProvider({url:"//a.tile.openstreetmap.org/"})}));var Le=r(798143),Re=r.n(Le),We=function(){function e(e){this._scene=e.scene;var t=document.createElement("div");t.className="infoWindow",this._div=t;var r=document.createElement("div");r.className="frame",this._div.appendChild(r);var i=document.createElement("div");i.className="content",r.appendChild(i),e.container.appendChild(t),this._content=i,this.setVisible(!0),this._div.style.position="absolute"}return e.prototype.setVisible=function(e){this._visible=e,this._div.style.display=e?"block":"none"},e.prototype.setContent=function(e){if("string"==typeof e)this._content.innerHTML=e;else{for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._content.appendChild(e)}},e.prototype.setPosition=function(e,t){this._position=this._scene.globe.ellipsoid.cartographicToCartesian(n.Cartographic.fromDegrees(t,e,0))},e.prototype.showAt=function(e,t,r){this.setPosition(e,t),this.setContent(r),this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e.prototype.computeVisible=function(){var e=6378137,t=6378137,r=6356752.314245179,i=this._scene.camera.position,n=i.x/e,o=i.y/t,a=i.z/r,l=n*n+o*o+a*a-1,s=this._position,u=s.x/e-n,c=s.y/t-o,f=s.z/r-a,p=-(u*n+c*o+f*a);p>l&&p*p/(u*u+c*c+f*f)>l?this.setVisible(!1):this.setVisible(!0)},e.prototype.update=function(){if(this.computeVisible(),this._visible&&this._position){var e=n.SceneTransforms.wgs84ToWindowCoordinates(this._scene,this._position);if(e){var t=Math.floor(e.x)-this._div.clientWidth/2+"px",r=Math.floor(e.y)-this._div.clientHeight+"px";this._div.tabIndex=5,this._div.style.left=t,this._div.style.top=r}}},e.prototype.destroy=function(){this._div.parentNode.removeChild(this._div)},e}(),Ge=function e(t){if(0!==t.length)for(var r=0;r<t.length;r++){var i=t.item(r);i.removeAttribute("data-reactid"),e(i.children||[])}};i.default.registerType("overlay",{create:function(e,t){var r=function(e,t){var r=e.cloneNode(!0);r.id=t.id+"-overlay",r.className=(t.className||e.className)+"-overlay",r.removeAttribute("data-reactid"),Ge(r.children||[]);var i=t.closeClass||"close";if(t.onClose&&1===r.getElementsByClassName(i).length){var n=r.getElementsByClassName(i)[0];Re().add(n,"click",(function(e){t.onClose(e.target.getAttribute("data-overlayid"))}))}return r}(document.getElementById(e.id),e),i=new We(t);i.showAt(e.position.y,e.position.x,r),i.setVisible(!0);var n=t.scene.primitives.add(i);return{detached:!0,info:n,remove:function(){t.scene.primitives.remove(n)}}},update:function(e,t,r,i){return F()(t.position,r.position)&&t.visibility===r.visibility?null:(e.remove(),t.visibility?this.create(t,i):null)}});var qe=r(281763),Ue=r.n(qe),He=r(807654),Ne=r.n(He),Ve=r(166287),Fe=r(550172);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Ze(e){var t=e.style||{},r=t.format,i=t.body;return r&&i?"3dtiles"===r?Promise.resolve(i):"geostyler"===r?(0,Ve.getStyleParser)("3dtiles").then((function(e){return e.writeStyle(i)})):Promise.all([(0,Ve.getStyleParser)(r),(0,Ve.getStyleParser)("3dtiles")]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);s=!0);}catch(e){u=!0,n=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];return o.readStyle(i).then((function(e){return a.writeStyle(e)}))})):Promise.resolve(null)}function Be(e,t){var r=t.heightOffset;if(!Ne()(r)&&Ue()(r)){var i=e.boundingSphere,o=n.Cartographic.fromCartesian(i.center),a=n.Cartesian3.fromRadians(o.longitude,o.latitude,0),l=n.Cartesian3.fromRadians(o.longitude,o.latitude,r),s=n.Cartesian3.subtract(l,a,new n.Cartesian3);e.modelMatrix=n.Matrix4.fromTranslation(s)}}function $e(e,t,r){t.clippingPolygon?(0,Fe.ir)(t.clippingPolygon,!!t.clippingPolygonUnion,t.clipOriginalGeometry).then((function(i){e.clippingPlanes=new n.ClippingPlaneCollection({modelMatrix:n.Matrix4.inverse(n.Matrix4.multiply(e.root.computedTransform,e._initialClippingPlanesOriginMatrix,new n.Matrix4),new n.Matrix4),planes:i,edgeWidth:1,edgeColor:n.Color.WHITE,unionClippingRegions:!!t.clippingPolygonUnion}),r.scene.requestRender()})):(e.clippingPlanes=new n.ClippingPlaneCollection({planes:[]}),r.scene.requestRender())}function Qe(e,t){e.ready?t():e.readyPromise.then((function(){t()}))}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}i.default.registerType("3dtiles",{create:function(e,t){if(e.visibility&&e.url){var r=t.scene.primitives.add(new n.Cesium3DTileset({url:new n.Resource({url:e.url,proxy:(0,l.$)(e.url)?new n.DefaultProxy((0,l.b)()):void 0})}));return r.msId=e.id,Qe(r,(function(){Be(r,e),$e(r,e,t),Ze(e).then((function(e){e&&(r.style=new n.Cesium3DTileStyle(e))}))})),{detached:!0,tileSet:r,remove:function(){t.scene.primitives.remove(r)},setVisible:function(e){r.show=!!e}}}return{detached:!0,remove:function(){},setVisible:function(){}}},update:function(e,t,r,i){return t.visibility&&!r.visibility?this.create(t,i):!t.visibility&&r.visibility&&null!=e&&e.remove?(e.remove(),null):(F()(t.clippingPolygon,r.clippingPolygon)&&t.clippingPolygonUnion===r.clippingPolygonUnion&&t.clipOriginalGeometry===r.clipOriginalGeometry||null==e||!e.tileSet||Qe(e.tileSet,(function(){$e(e.tileSet,t,i)})),!F()(t.style,r.style)&&null!=e&&e.tileSet&&Qe(e.tileSet,(function(){Ze(t).then((function(t){t&&null!=e&&e.tileSet&&(e.tileSet.makeStyleDirty(),e.tileSet.style=new n.Cesium3DTileStyle(t))}))})),null!=e&&e.tileSet&&t.heightOffset!==r.heightOffset&&Qe(e.tileSet,(function(){Be(e.tileSet,t)})),null)}});var Je=["style"];function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==Xe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Xe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=function(e,t){var r=new n.GeoJsonDataSource(null==e?void 0:e.id),i={type:"FeatureCollection",features:(0,Ve.flattenFeatures)((null==e?void 0:e.features)||[],(function(e){return e.style,function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,Je)}))};return e.visibility&&r.load(i,{stroke:new n.Color(0,0,0,0),fill:new n.Color(0,0,0,0),markerColor:new n.Color(0,0,0,0),strokeWidth:0,markerSize:0}).then((function(){t.dataSources.add(r),(0,Ve.layerToGeoStylerStyle)(e).then((function(i){(0,Ve.getStyle)((0,Ve.applyDefaultStyleToLayer)(Ke(Ke({},e),{},{style:i})),"cesium").then((function(i){var n,o,a;i&&i({entities:null===(n=r)||void 0===n||null===(o=n.entities)||void 0===o?void 0:o.values,map:t,opacity:null!==(a=e.opacity)&&void 0!==a?a:1}).then((function(){t.scene.requestRender()}))}))}))})),r.show=!!e.visibility,r.queryable=void 0===e.queryable||e.queryable,{detached:!0,dataSource:r,remove:function(){r&&t&&(t.dataSources.remove(r),r=void 0)},setVisible:function(){}}};i.default.registerType("vector",{create:tt,update:function(e,t,r,i){var n,o;return F()(t.features,r.features)&&t.visibility===r.visibility?(null==e||null===(n=e.dataSource)||void 0===n||null===(o=n.entities)||void 0===o||!o.values||F()(t.style,r.style)&&t.opacity===r.opacity||(0,Ve.layerToGeoStylerStyle)(t).then((function(r){(0,Ve.getStyle)((0,Ve.applyDefaultStyleToLayer)(Ke(Ke({},t),{},{style:r})),"cesium").then((function(r){var n;r&&r({entities:e.dataSource.entities.values,map:i,opacity:null!==(n=t.opacity)&&void 0!==n?n:1}).then((function(){i.scene.requestRender()}))}))})),null):tt(t,i)}});var rt=r(375875),it=r.n(rt),nt=r(432420),ot=r(838848);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==at(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==at(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===at(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ct=function(e,t){var r=new n.GeoJsonDataSource(null==e?void 0:e.id),i=(0,J.v)(e),o=it().CancelToken.source();return e.visibility&&function(e,t,r){return(0,nt.Bm)(e.url,e.name,st({outputFormat:"application/json",srsname:"EPSG:4326"},t),{cancelToken:r})}(e,i,o.token).then((function(i){var o=i.data;r.load(o,{stroke:new n.Color(0,0,0,0),fill:new n.Color(0,0,0,0),markerColor:new n.Color(0,0,0,0),strokeWidth:0,markerSize:0}).then((function(){t.dataSources.add(r),(0,Ve.layerToGeoStylerStyle)(e).then((function(i){(0,Ve.getStyle)((0,Ve.applyDefaultStyleToLayer)(st(st({},e),{},{style:i})),"cesium").then((function(i){var n,o,a;i&&i({entities:null===(n=r)||void 0===n||null===(o=n.entities)||void 0===o?void 0:o.values,map:t,opacity:null!==(a=e.opacity)&&void 0!==a?a:1}).then((function(){t.scene.requestRender()}))}))}))}))})),r.show=!!e.visibility,r.queryable=void 0===e.queryable||e.queryable,{detached:!0,dataSource:r,remove:function(){null!=o&&o.cancel&&o.cancel(),r&&t&&(t.dataSources.remove(r),r=void 0)},setVisible:function(){}}};i.default.registerType("wfs",{create:ct,update:function(e,t,r,i){var n,o;return(0,ot.Es)(r,t)||t.visibility!==r.visibility?ct(t,i):(null==e||null===(n=e.dataSource)||void 0===n||null===(o=n.entities)||void 0===o||!o.values||F()(t.style,r.style)&&t.opacity===r.opacity||(0,Ve.layerToGeoStylerStyle)(t).then((function(r){(0,Ve.getStyle)((0,Ve.applyDefaultStyleToLayer)(st(st({},t),{},{style:r})),"cesium").then((function(r){var n;r&&r({entities:e.dataSource.entities.values,map:i,opacity:null!==(n=t.opacity)&&void 0!==n?n:1}).then((function(){i.scene.requestRender()}))}))})),null)}});var ft=function(e,t){var r;switch(t.terrainProvider=void 0,e.provider){case"wms":r=new G(X.wmsToCesiumOptionsBIL(e));break;case"cesium":r=new n.CesiumTerrainProvider(function(e){var t,r,i,n,o;return{url:e.url,credit:null==e||null===(t=e.options)||void 0===t?void 0:t.credit,ellipsoid:null==e||null===(r=e.options)||void 0===r?void 0:r.ellipsoid,requestMetadata:null==e||null===(i=e.options)||void 0===i?void 0:i.requestMetadata,requestWaterMask:null==e||null===(n=e.options)||void 0===n?void 0:n.requestWaterMask,requestVertexNormals:null==e||null===(o=e.options)||void 0===o?void 0:o.requestVertexNormals}}(e));break;default:r=new n.EllipsoidTerrainProvider}return t.terrainProvider=r,{detached:!0,terrainProvider:r,remove:function(){t.terrainProvider=new n.EllipsoidTerrainProvider},setVisible:function(){}}};i.default.registerType("terrain",{create:ft,update:function(e,t,r,i){return t.securityToken!==r.securityToken||r.credits!==t.credits||r.provider!==t.provider?ft(t,i):null}});const pt={}},223502:(e,t,r)=>{"use strict";r.d(t,{$:()=>s,b:()=>u});var i=r(737275),n=r(701469),o=r.n(n),a=r(513218),l=r.n(a),s=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o()(t))return t.reduce((function(t,r){return e(r)&&t}),!0);var n=!1,a=!(0===t.indexOf("http")),s=!a&&t.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(s){var u=window.location;a=s[1]===u.protocol&&s[3]===u.hostname;var c=s[4],f=u.port;(80!==c&&""!==c||"80"!==f&&""!==f)&&(a=a&&c===f)}if(!a){var p=i.ZP.getProxyUrl(r);if(p){var y=[];l()(p)&&(y=p.useCORS||[],p=p.url),y.reduce((function(e,r){return e||0===t.indexOf(r)}),!1)||(n=!0)}}return n},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.ZP.getProxyUrl(e);return t&&l()(t)&&(t=t.url),t}},333358:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var i=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],n=function(e){return-1!==i.indexOf(e)}},550172:(e,t,r)=>{"use strict";r.d(t,{KF:()=>m,c4:()=>v,XI:()=>g,U2:()=>b,xB:()=>w,ir:()=>S});var i=r(376180),n=r(65792),o=r.n(n),a=r(545578),l=r.n(a);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);s=!0);}catch(e){u=!0,n=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var m=function(e){var t=e.color,r=e.opacity,n=y(o()(t).gl(),4),a=n[0],l=n[1],s=n[2],u=n[3];return void 0!==r?new i.Color(a,l,s,r):new i.Color(a,l,s,u)},v=function(e){var t=e.coordinates,r=e.width,n=void 0===r?4:r,o=e.color,a=void 0===o?"#ff00ff":o,l=e.opacity,s=void 0===l?1:l,c=e.depthFailColor,p=e.depthFailOpacity,y=e.dashLength,h=e.clampToGround;return new i[h?"GroundPolylinePrimitive":"Primitive"](f(f({geometryInstances:new i.GeometryInstance({geometry:h?new i.GroundPolylineGeometry({positions:u(t),width:n}):new i.PolylineGeometry({positions:u(t),width:n,arcType:i.ArcType.NONE})}),appearance:new i.PolylineMaterialAppearance({material:y?i.Material.fromType("PolylineDash",{color:m({color:a,opacity:s}),dashLength:y}):i.Material.fromType("Color",{color:m({color:a,opacity:s})})})},c&&{depthFailAppearance:new i.PolylineMaterialAppearance({material:y?i.Material.fromType("PolylineDash",{color:m({color:c,opacity:p}),dashLength:y}):i.Material.fromType("Color",{color:m({color:c,opacity:p})})})}),{},{allowPicking:!1,asynchronous:!1}))},g=function(e){var t=e.coordinates,r=e.color,n=void 0===r?"#ff00ffAA":r,o=e.opacity,a=void 0===o?1:o,l=e.depthFailColor,s=e.depthFailOpacity;return new i.Primitive(f(f({geometryInstances:new i.GeometryInstance({geometry:new i.PolygonGeometry({polygonHierarchy:new i.PolygonHierarchy(u(t)),perPositionHeight:!0})}),appearance:new i.MaterialAppearance({material:i.Material.fromType("Color",{color:m({color:n,opacity:a})}),faceForward:!0})},l&&{depthFailAppearance:new i.MaterialAppearance({material:i.Material.fromType("Color",{color:m({color:l,opacity:s})}),faceForward:!0})}),{},{allowPicking:!1,asynchronous:!1}))},b=function(e,t){var r;null!=e&&null!==(r=e.scene)&&void 0!==r&&r.primitives&&t&&!t.isDestroyed()&&(t.removeAll(),e.scene.primitives.remove(t))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.stroke,i=t.strokeWidth,n=void 0===i?1:i,o=t.fill,a=void 0===o?"#ffffff":o,l=r?e+2*n:e,s=document.createElement("canvas");s.setAttribute("width",l),s.setAttribute("height",l);var u=s.getContext("2d");return u.beginPath(),a&&(u.fillStyle="#ffffff"),r&&(u.strokeStyle=r,u.lineWidth=n),u.arc(l/2,l/2,e/2,0,2*Math.PI),a&&u.fill(),r&&u.stroke(),s},S=function(e,t,n){return r.e(79706).then(r.bind(r,979706)).then((function(o){var a,s,c=o.default,f=(n?e:c(e)).geometry;return(s=u((null==f||null===(a=f.coordinates)||void 0===a?void 0:a[0])||[]),Promise.all([r.e(86355),r.e(29014)]).then(r.bind(r,529014)).then((function(e){return(0,e.default)({type:"Feature",geometry:{type:"LineString",coordinates:s},properties:{}})?s:u(s).reverse()}))).then((function(e){for(var r=l()(t?e:e.reverse(),(function(e){return"".concat(e[0]).concat(e[1])})).map((function(e){var t=y(e,3),r=t[0],n=t[1],o=t[2],a=void 0===o?0:o;return i.Cartesian3.fromDegrees(r,n,a)})),n=r.length,o=[],a=0;a<n;++a){var s=(a+1)%n,u=i.Cartesian3.add(r[a],r[s],new i.Cartesian3);u=i.Cartesian3.multiplyByScalar(u,.5,u);var c=i.Cartesian3.normalize(u,new i.Cartesian3),f=i.Cartesian3.subtract(r[s],u,new i.Cartesian3);f=i.Cartesian3.normalize(f,f);var p=i.Cartesian3.cross(f,c,new i.Cartesian3);p=i.Cartesian3.normalize(p,p);var h=new i.Plane(p,0),d=i.Plane.getPointDistance(h,u);o.push(new i.ClippingPlane(p,d))}return o}))}))}},798143:function(e,t,r){var i,n;void 0===(n="function"==typeof(i=function(){function e(e,t){return function(r,i,n,o){r[e]?r[e](i,n,o):r[t]&&r[t]("on"+i,n)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})?i.call(t,r,t,e):i)||(e.exports=n)},807654:(e,t,r)=>{var i=r(281763);e.exports=function(e){return i(e)&&e!=+e}}}]);