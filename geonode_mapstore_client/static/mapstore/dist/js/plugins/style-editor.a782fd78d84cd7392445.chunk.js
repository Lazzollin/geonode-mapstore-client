(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[91701],{398592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var n=r(701469),o=r.n(n),i=r(747037),l=r.n(i),u=r(737295),c=r.n(u),a=r(675263),s=r.n(a),p=r(124852),f=r.n(p),y=r(171703),d=r(867076),b=r(22222),g=r(580416),v=r(396909),m=r(615402),h=r(965539),O=r(982030),S=r(173014),w=r(532425),j=r(274621),E=r(893222),P=r(99009),x=r(278720);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function T(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===R(t)?t:String(t)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(c,e);var t,r,n,i,u=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(n);if(i){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return t=c,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||o()(this.props.editingAllowedRoles)&&l()(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&(0,P.uW)(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return f().createElement(h.Z,{className:"ms-style-editor-container",header:this.props.showToolbar?f().createElement("div",{className:"ms-style-editor-container-header"},this.props.header,f().createElement("div",{className:"text-center"},f().createElement(x.lC,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:f().createElement("div",{style:{height:25}})},this.props.isEditing?f().createElement(x.m2,{config:this.props.editorConfig}):f().createElement(x.tM,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(f().Component);T(A,"propTypes",{layer:s().object,header:s().node,isEditing:s().bool,showToolbar:s().node.bool,onInit:s().func,styleService:s().object,userRole:s().string,editingAllowedRoles:s().array,enableSetDefaultStyle:s().bool,canEdit:s().bool,editorConfig:s().object}),T(A,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var I=(0,d.compose)(d.toClass,(0,d.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).active}),(function(){return function(){return null}})),(0,y.connect)((0,b.P1)([E.ex,E.aN,E.Vf,E.p,j.L3,E.z_,E.Z0],(function(e,t,r,n,o,i,l){return{isEditing:"edit"===e,loading:t,layer:r,error:n,userRole:o,canEdit:i,styleService:l}})),{onInit:v.E0,onUpdateParams:g.Xy},(function(e,t,r){var n,o,i,l=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),u=r.styleService&&!l?_(_({},r.styleService),{},{isStatic:!0}):_({},e.styleService);return _(_(_(_({},r),e),t),{},{styleService:u})})),(0,O.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:f().createElement(m.Z,{msgId:"styleeditor.errorTitle"}),description:f().createElement(m.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,S.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return f().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},f().createElement(w.Z,e))})),(0,d.compose)((0,y.connect)((function(){return{}}),{toggleStyleEditor:v.Wv}),(0,d.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(A);const Z={StyleEditorPlugin:c()(I,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:x.lC}}),reducers:{styleeditor:r(532244).Z},epics:r(394943).ZP}},274621:(e,t,r)=>{"use strict";r.d(t,{np:()=>n,L3:()=>o,jl:()=>i,y8:()=>l,qg:()=>u}),r(737295),r(227361);var n=function(e){return e&&e.security&&e.security.user},o=function(e){return n(e)&&n(e).role},i=function(e){return e&&e.security&&e.security.user},l=function(e){return e.security&&e.security.token},u=function(e){return"ADMIN"===o(e)}},577215:(e,t,r)=>{"use strict";r.d(t,{oL:()=>b,F0:()=>g,cP:()=>v,Br:()=>m});var n=r(944908),o=r.n(n),i=r(513218),l=r.n(i),u=r(984596),c=r.n(u),a=r(396606);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],b=function(){return o()(Object.values((0,a.eq)()))},g=function(e){return d.includes(e)},v=function(e){return b().includes(e)},m=function(e){var t,r,n,o,i;return l()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&c()(e.Style).map((function(e){return f(f(f({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:c()(e.LegendURL).map((function(e){var t,r,n,o,i,l;return f({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(l=i.$)||void 0===l?void 0:l["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}}}}]);